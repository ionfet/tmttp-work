<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TTP UI Kit</title>
  <style>
    /*
      =========================================================
      Dual-Mode UI Kit (Light + Dark)
      Brand: #F048A8 (magenta), #5CE0E5 (cyan), #282828 (ink)
      Added: Success #22C55E, Danger #EF4444, Warning #F59E0B
      Accessibility: AA/AAA compliant pairings
      =========================================================
    */

    :root {
      /* Base brand tokens (update values if rebranding; keep names) */
      --brand-pink: #F048A8;
      --brand-cyan: #5CE0E5;
      --ink-900: #282828;

      /* Typography & spacing */
      --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      --radius: 12px;
      --radius-sm: 10px;
      --shadow-1: 0 1px 2px rgba(0,0,0,0.06), 0 1px 1px rgba(0,0,0,0.04);
      --shadow-2: 0 6px 16px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.08);
      --ring: 0 0 0 3px rgba(92, 224, 229, 0.45); /* cyan focus ring */

      /* Component sizing */
      --size-ctl: 44px; /* Min interactive size */
      --pad-card: 18px;
      --pad-section: 28px;

      /* Transitions */
      --t-fast: 120ms;
      --t-med: 220ms;
    }

    /* ===================== LIGHT THEME ===================== */
    :root[data-theme="light"] {
      /* Backgrounds & text */
      --bg: #FFFFFF;
      --bg-contrast: #F5F7F8;
      --bg-blue: #E9FBFD;       /* cyan-tinted panel */
      --card: #FFFFFF;
      --border: #E4E6EB;

      --text: var(--ink-900);   /* #282828 */
      --text-muted: #555555;

      /* System colors */
      --sys-primary: var(--brand-pink);
      --sys-primary-hover: #E13C9E;
      --sys-primary-active: #C83489;

      --sys-secondary: var(--brand-cyan);
      --sys-secondary-hover: #3FD7DD;
      --sys-secondary-active: #2BC9D0;

      /* Secondary-invert = darker teal for link/text on white (AAA) */
      --sys-secondary-invert: #1C5F5A;

      /* On-color text for filled elements (AA/AAA as body text) */
      --on-primary: #121212;       /* 5.53:1 on #F048A8 */
      --on-secondary: #121212;     /* 11.82:1 on #5CE0E5 */
      --on-secondary-invert: #FFFFFF; /* for teal fills if used */

      /* Status colors */
      --success: #22C55E;
      --success-hover: #1FB154;
      --success-active: #19964A;
      --on-success: #121212;          /* 8.22:1 on #22C55E */

      --danger: #EF4444;
      --danger-hover: #E03535;
      --danger-active: #C62828;
      --on-danger: #121212;           /* 4.98:1 on #EF4444 */

      --warning: #F59E0B;
      --warning-bg: #FEF3C7;
      --warning-border: #D97706;
      --on-warning: #121212;          /* 8.72:1 on #F59E0B */

      --info: var(--brand-cyan);
      --info-bg: #E9FBFD;
      --info-border: #2BC9D0;        /* darker cyan for borders */

      /* Buttons */
      --btn-bg: var(--sys-primary);
      --btn-bg-hover: var(--sys-primary-hover);
      --btn-bg-active: var(--sys-primary-active);
      --btn-text: var(--on-primary);

      --btn-bg-2: var(--sys-secondary);
      --btn-bg-2-hover: var(--sys-secondary-hover);
      --btn-bg-2-active: var(--sys-secondary-active);
      --btn-text-2: var(--on-secondary);

      --btn-success-bg: var(--success);
      --btn-success-hover: var(--success-hover);
      --btn-success-active: var(--success-active);
      --btn-success-text: var(--on-success);

      --btn-danger-bg: var(--danger);
      --btn-danger-hover: var(--danger-hover);
      --btn-danger-active: var(--danger-active);
      --btn-danger-text: var(--on-danger);

      /* Links */
      --link: var(--sys-secondary-invert); /* teal for readability on white */
      --on-link: #FFFFFF;

      /* Disabled */
      --disabled-bg: #ECEDEF;
      --disabled-text: #9AA1A8;
      --disabled-border: #E1E3E6;
    }

    /* ===================== DARK THEME ====================== */
    :root[data-theme="dark"] {
      --bg: #121212;
      --bg-contrast: #1E1E1E;   /* subtle elevated surface */
      --bg-blue: #0F2A2D;       /* cyan-tinted dark panel */
      --card: #1A1A1A;
      --border: #2A2A2A;

      --text: #FFFFFF;
      --text-muted: #D0D0D0;

      --sys-primary: var(--brand-pink);
      --sys-primary-hover: #FF5ABB;
      --sys-primary-active: #E13C9E;

      --sys-secondary: var(--brand-cyan);
      --sys-secondary-hover: #79E7EB;
      --sys-secondary-active: #43D4D9;

      /* Lighter cyan accent for icons/lines on dark */
      --sys-secondary-invert: #9BE8EC;

      /* On-color text on bright fills stays dark for AAA/AA */
      --on-primary: #121212;
      --on-secondary: #121212;
      --on-secondary-invert: #121212;

      /* Status */
      --success: #22C55E;
      --success-hover: #32CF6B;
      --success-active: #1FB154;
      --on-success: #121212;

      --danger: #EF4444;
      --danger-hover: #F05A5A;
      --danger-active: #E03535;
      --on-danger: #121212;

      --warning: #F59E0B;
      --warning-bg: #2A1E0A;
      --warning-border: #F59E0B;
      --on-warning: #121212;

      --info: var(--brand-cyan);
      --info-bg: #102A2C;
      --info-border: var(--brand-cyan);

      /* Buttons */
      --btn-bg: var(--sys-primary);
      --btn-bg-hover: var(--sys-primary-hover);
      --btn-bg-active: var(--sys-primary-active);
      --btn-text: var(--on-primary);

      --btn-bg-2: var(--sys-secondary);
      --btn-bg-2-hover: var(--sys-secondary-hover);
      --btn-bg-2-active: var(--sys-secondary-active);
      --btn-text-2: var(--on-secondary);

      --btn-success-bg: var(--success);
      --btn-success-hover: var(--success-hover);
      --btn-success-active: var(--success-active);
      --btn-success-text: var(--on-success);

      --btn-danger-bg: var(--danger);
      --btn-danger-hover: var(--danger-hover);
      --btn-danger-active: var(--danger-active);
      --btn-danger-text: var(--on-danger);

      /* Links on dark can be bright cyan */
      --link: var(--sys-secondary);
      --on-link: var(--on-secondary);

      /* Disabled */
      --disabled-bg: #2A2A2A;
      --disabled-text: #8B8B8B;
      --disabled-border: #333333;
    }

    /* ===================== Base styles ===================== */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-sans);
      line-height: 1.45;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background var(--t-med) ease, color var(--t-med) ease;
    }

    h1, h2, h3 { line-height: 1.1; margin: 0 0 12px 0; font-weight: 600; }
    h1 { font-size: 28px; letter-spacing: -0.02em; }
    h2 { font-size: 22px; letter-spacing: -0.01em; }
    h3 { font-size: 18px; }

    p { margin: 0 0 12px 0; color: var(--text); }
    small, .muted { color: var(--text-muted); }

    a { color: var(--link); text-decoration: none; transition: all var(--t-fast) ease; }
    a:hover { text-decoration: underline; }

    ul, ol { margin: 0 0 12px 0; padding-left: 24px; }
    li { margin-bottom: 8px; }

    .page {
      max-width: 1500px;
      margin: 0 auto;
      padding: 18px;
      min-height: 100vh;
      display: grid;
      grid-template-columns: 550px 1fr;
      gap: 18px;
      align-items: start;
    }

    .sidebar {
      position: sticky; top: 18px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-1);
      padding: var(--pad-card);
    }

    .main { display: grid; gap: 18px; min-width: 0; }

    .section {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-1);
      padding: var(--pad-section);
    }

    .row { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; }
    .toolbar { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; flex-wrap: wrap; }

    .switch {
      display: inline-flex; align-items: center; background: var(--bg-contrast);
      border: 1px solid var(--border); border-radius: 999px; padding: 4px; gap: 0;
    }
    .switch button {
      min-width: 80px; height: 32px; border-radius: 999px; border: none; background: transparent;
      color: var(--text); cursor: pointer; padding: 0 12px; font-weight: 600; font-size: 14px; transition: all var(--t-fast) ease;
    }
    .switch button[aria-pressed="true"] { background: var(--sys-secondary); color: var(--on-secondary); box-shadow: var(--shadow-1); }

    /* Swatches */
    .swatch {
      width: 100%; max-width: 240px; border-radius: var(--radius-sm);
      border: 1px solid var(--border); overflow: hidden; cursor: pointer;
      box-shadow: var(--shadow-1); transition: transform var(--t-fast) ease;
    }
    .swatch:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); }
    .swatch .tone { height: 64px; }
    .swatch .meta { padding: 10px; font-size: 12px; background: var(--card); }
    .code { font-family: ui-monospace, "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace; font-size: 12px; word-break: break-all; }

    /* Buttons */
    .btn {
      height: var(--size-ctl); padding: 0 16px; border-radius: 8px; border: 1px solid transparent;
      cursor: pointer; font-weight: 600; font-size: 14px; display: inline-flex; align-items: center; justify-content: center;
      gap: 8px; box-shadow: var(--shadow-1); transition: all var(--t-fast) ease; text-decoration: none; position: relative;
    }
    .btn:focus-visible { outline: none; box-shadow: var(--shadow-2), var(--ring); }
    .btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-2); }
    .btn:active { transform: translateY(0); }

    .btn.primary { background: var(--btn-bg); color: var(--btn-text); }
    .btn.primary:hover { background: var(--btn-bg-hover); }
    .btn.primary:active { background: var(--btn-bg-active); }

    .btn.secondary { background: var(--btn-bg-2); color: var(--btn-text-2); }
    .btn.secondary:hover { background: var(--btn-bg-2-hover); }
    .btn.secondary:active { background: var(--btn-bg-2-active); }

    .btn.success { background: var(--btn-success-bg); color: var(--btn-success-text); }
    .btn.success:hover { background: var(--btn-success-hover); }
    .btn.success:active { background: var(--btn-success-active); }

    .btn.danger { background: var(--btn-danger-bg); color: var(--btn-danger-text); }
    .btn.danger:hover { background: var(--btn-danger-hover); }
    .btn.danger:active { background: var(--btn-danger-active); }

    .btn.ghost { background: transparent; border-color: var(--border); color: var(--text); }
    .btn.inverse { background: var(--bg-contrast); color: var(--text); }

    .btn[disabled], .btn.is-loading {
      background: var(--disabled-bg) !important; color: var(--disabled-text) !important;
      border-color: var(--disabled-border) !important; box-shadow: none; cursor: not-allowed; transform: none;
    }
    .btn.is-loading::after {
      content: ""; width: 16px; height: 16px; border-radius: 999px; border: 2px solid currentColor; border-top-color: transparent;
      position: absolute; right: 12px; animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Inputs */
    .input, .select, .textarea {
      width: 100%; min-height: var(--size-ctl); padding: 0 14px; border-radius: 8px; border: 1px solid var(--border);
      background: var(--bg); color: var(--text); box-shadow: var(--shadow-1); font-family: inherit; font-size: 14px;
      transition: all var(--t-fast) ease;
    }
    .textarea { min-height: 100px; padding: 12px 14px; resize: vertical; line-height: 1.4; }
    .input::placeholder, .textarea::placeholder { color: var(--text-muted); opacity: 1; }

    .input:focus-visible, .select:focus-visible, .textarea:focus-visible {
      outline: none; box-shadow: var(--ring); border-color: var(--sys-secondary);
    }

    .field { margin-bottom: 12px; }
    label { display: block; font-weight: 500; margin-bottom: 6px; color: var(--text); }
    .hint { font-size: 12px; margin-top: 6px; }

    /* Validation states */
    .input.success, .select.success, .textarea.success { border-color: var(--success); box-shadow: 0 0 0 3px rgba(34,197,94,0.25); }
    .input.error, .select.error, .textarea.error { border-color: var(--danger); box-shadow: 0 0 0 3px rgba(239,68,68,0.25); }
    .hint.success { color: var(--success); }
    .hint.error { color: var(--danger); }

    .input:disabled, .select:disabled, .textarea:disabled {
      background: var(--disabled-bg); color: var(--disabled-text); border-color: var(--disabled-border);
    }

    /* Cards */
    .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 18px; box-shadow: var(--shadow-1); }
    .card .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; flex-wrap: wrap; gap: 8px; }
    .card.hoverable:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); transition: transform var(--t-fast) ease; }

    /* Alerts */
    .alert {
      border-radius: var(--radius); padding: 14px; border: 1px solid; display: grid;
      grid-template-columns: 24px 1fr; gap: 12px; align-items: start;
    }
    .alert.info { background: var(--info-bg); border-color: var(--info-border); color: var(--text); }
    .alert.warning { background: var(--warning-bg); border-color: var(--warning-border); color: var(--text); }
    .alert.success { background: #ECFDF5; border-color: var(--success); color: var(--text); }
    [data-theme="dark"] .alert.success { background: #0E2317; }
    .alert.danger { background: #FEE2E2; border-color: var(--danger); color: var(--text); }
    [data-theme="dark"] .alert.danger { background: #2A1213; }
    .alert svg { stroke-width: 1.5; fill: none; }

    /* Badges */
    .badge { display: inline-flex; align-items: center; height: 24px; padding: 0 8px; border-radius: 999px; border: 1px solid transparent;
      font-weight: 600; font-size: 11px; letter-spacing: 0.02em; text-transform: uppercase;
    }
    .badge.brand { background: var(--sys-primary); color: var(--on-primary); }
    .badge.info { background: var(--info); color: var(--on-secondary); }
    .badge.warning { background: var(--warning); color: var(--on-warning); }
    .badge.success { background: var(--success); color: var(--on-success); }
    .badge.danger { background: var(--danger); color: var(--on-danger); }

    /* Grid helpers */
    .grid { display: grid; gap: 12px; }
    .cols-2 { grid-template-columns: repeat(2, 1fr); }
    .cols-3 { grid-template-columns: repeat(3, 1fr); }

    /* Token table */
    table { width: 100%; border-collapse: collapse; font-size: 14px; margin-top: 12px; }
    th, td { padding: 12px 8px; border-bottom: 1px solid var(--border); text-align: left; vertical-align: top; }
    th { font-weight: 600; background: var(--bg-contrast); }

    .tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; border: 1px solid var(--border); display: inline-block; font-weight: 600; text-transform: uppercase; }
    .tag.pass { border-color: #22c55e; background: #dcfce7; color: #15803d; }
    [data-theme="dark"] .tag.pass { background: #15803d; color: #dcfce7; }
    .tag.fail { border-color: #ef4444; background: #fecaca; color: #dc2626; }
    [data-theme="dark"] .tag.fail { background: #dc2626; color: #fecaca; }

    .kbd { font: 12px ui-monospace, "SF Mono", Monaco, Consolas, monospace; background: var(--bg-contrast); border: 1px solid var(--border); padding: 2px 6px; border-radius: 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }

    /* Responsive */
    @media (max-width: 900px) {
      .page { grid-template-columns: 1fr; padding: 12px; }
      .cols-3, .cols-2 { grid-template-columns: 1fr; }
      .sidebar { position: static; }
      .toolbar { flex-direction: column; align-items: stretch; gap: 8px; }
      .row { flex-direction: column; align-items: stretch; }
      table { font-size: 12px; }
      th, td { padding: 8px 4px; }
    }
    @media (max-width: 600px) {
      .page { padding: 8px; }
      .section, .card, .sidebar { padding: 16px; }
      h1 { font-size: 24px; } h2 { font-size: 20px; } h3 { font-size: 16px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Sidebar: Color tokens & theme toggle -->
    <aside class="sidebar" aria-label="Color tokens">
      <div class="toolbar">
        <strong>Theme</strong>
        <div class="switch" role="group" aria-label="Toggle theme">
          <button type="button" id="btnLight" aria-pressed="true">Light</button>
          <button type="button" id="btnDark" aria-pressed="false">Dark</button>
        </div>
      </div>

      <h3>System colors</h3>
      <div class="grid cols-2" id="swatches-system"></div>

      <h3 style="margin-top: 20px;">Backgrounds</h3>
      <div class="grid cols-2" id="swatches-bg"></div>

      <p class="muted" style="margin-top: 16px; font-size: 12px;">
        Tip: click any swatch to copy its color code.
      </p>
    </aside>

    <!-- Main content: Components, Guidelines, Contrast checker -->
    <main class="main">
      <section class="section" aria-labelledby="intro-title">
        <div class="toolbar">
          <h1 id="intro-title">TTP UI Kit</h1>
          <div class="row">
            <span class="badge brand">Brand</span>
            <span class="badge info">Info</span>
            <span class="badge warning">Warning</span>
            <span class="badge success">Success</span>
            <span class="badge danger">Danger</span>
          </div>
        </div>
        <p style="margin-top: 12px;">Pro tip: Press <span class="kbd">L</span>/<span class="kbd">D</span> to toggle light/dark.</p>
      </section>

      <section class="section" aria-labelledby="components-title">
        <h2 id="components-title">Components</h2>
        <div class="grid cols-2" style="margin-top: 16px;">
          <div class="card">
            <div class="header">
              <strong>Buttons</strong>
              <small class="muted">Hover/active/focus/disabled/loading</small>
            </div>
            <div class="grid">
              <button type="button" class="btn primary">Primary action</button>
              <button type="button" class="btn secondary">Secondary action</button>
              <button type="button" class="btn success">Save (Success)</button>
              <button type="button" class="btn danger">Delete (Danger)</button>
              <button type="button" class="btn primary is-loading" aria-busy="true">Submitting…</button>
              <button type="button" class="btn primary" disabled aria-disabled="true">Disabled</button>
              <button type="button" class="btn ghost">Ghost button</button>
            </div>
          </div>

          <div class="card">
            <div class="header">
              <strong>Form elements</strong>
              <small class="muted">44px min height</small>
            </div>
            <div class="grid">
              <div class="field">
                <label for="inp-normal">Text input</label>
                <input id="inp-normal" class="input" placeholder="Type here" />
                <div class="hint">Helper text with neutral tone.</div>
              </div>
              <div class="field">
                <label for="inp-success">Validated input</label>
                <input id="inp-success" class="input success" value="Valid value" />
                <div class="hint success">Looks good.</div>
              </div>
              <div class="field">
                <label for="inp-error">Input with error</label>
                <input id="inp-error" class="input error" placeholder="Email" />
                <div class="hint error">Please enter a valid email.</div>
              </div>
              <div class="field">
                <label for="sel">Select</label>
                <select id="sel" class="select">
                  <option>Option A</option>
                  <option>Option B</option>
                  <option>Option C</option>
                </select>
              </div>
              <div class="field">
                <label for="ta">Textarea</label>
                <textarea id="ta" class="textarea" placeholder="Tell us more…"></textarea>
              </div>
              <div class="field">
                <label for="inp-disabled">Disabled input</label>
                <input id="inp-disabled" class="input" disabled value="Can't edit" />
              </div>
            </div>
          </div>

          <div class="card">
            <div class="header">
              <strong>Alerts</strong>
              <small class="muted">Semantic statuses</small>
            </div>
            <div class="grid">
              <div class="alert info" role="status" aria-live="polite">
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor"/></svg>
                <div><strong>Info:</strong> Cyan communicates neutral information. Borders use a darker cyan for contrast.</div>
              </div>
              <div class="alert warning" role="status" aria-live="polite">
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3L22 20H2L12 3Z" stroke="currentColor"/></svg>
                <div><strong>Warning:</strong> Amber indicates caution without implying failure.</div>
              </div>
              <div class="alert success" role="status" aria-live="polite">
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 13l4 4L19 7" stroke="currentColor"/></svg>
                <div><strong>Success:</strong> Operation completed successfully.</div>
              </div>
              <div class="alert danger" role="status" aria-live="polite">
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor"/></svg>
                <div><strong>Danger:</strong> Something went wrong. Try again.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section" aria-labelledby="contrast-title">
        <h2 id="contrast-title">Live Contrast Checker</h2>
        <p class="muted">Computed from current theme tokens.</p>
        <div style="overflow-x: auto;">
          <table id="contrast-table" aria-describedby="contrast-title">
            <thead>
              <tr>
                <th>Pair</th>
                <th>Foreground</th>
                <th>Background</th>
                <th>Ratio</th>
                <th>Normal Text</th>
                <th>Large Text</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </main>
  </div>

  <script>
    // --- Utilities: color parsing & WCAG contrast ---
    function cssVar(name){ return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }
    function hexToRgb(hex){ const m = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return m ? { r: parseInt(m[1],16)/255, g: parseInt(m[2],16)/255, b: parseInt(m[3],16)/255 } : null; }
    function srgbToLin(c){ return (c <= 0.03928) ? c/12.92 : Math.pow((c+0.055)/1.055, 2.4); }
    function relLum(hex){ const rgb = hexToRgb(hex); if(!rgb) return 0;
      return 0.2126*srgbToLin(rgb.r) + 0.7152*srgbToLin(rgb.g) + 0.0722*srgbToLin(rgb.b); }
    function contrastRatio(fg, bg){ const L1 = relLum(fg), L2 = relLum(bg); const [a,b] = L1 > L2 ? [L1,L2] : [L2,L1]; return (a+0.05)/(b+0.05); }
    function fmtRatio(x){ return (Math.round(x*100)/100).toFixed(2) + ':1'; }

    // --- Theme toggle ---
    const btnLight = document.getElementById('btnLight');
    const btnDark  = document.getElementById('btnDark');

    function setTheme(mode){
      document.documentElement.setAttribute('data-theme', mode);
      btnLight.setAttribute('aria-pressed', mode === 'light');
      btnDark.setAttribute('aria-pressed', mode === 'dark');
      buildContrastTable();
      buildSwatches();
    }
    btnLight.addEventListener('click', () => setTheme('light'));
    btnDark .addEventListener('click', () => setTheme('dark'));
    window.addEventListener('keydown', (e) => {
      if(e.key === 'l' || e.key === 'L') setTheme('light');
      if(e.key === 'd' || e.key === 'D') setTheme('dark');
    });

    // --- Copy helper ---
    async function copy(text){ try{ await navigator.clipboard.writeText(text); } catch(e){} }

    // --- Swatches ---
    const sysTokens = [
      ['--sys-primary','System/Primary'],
      ['--sys-secondary','System/Secondary'],
      ['--sys-secondary-invert','System/Secondary-invert'],
      ['--success','System/Success'],
      ['--danger','System/Danger'],
      ['--warning','System/Warning'],
      ['--info','System/Info']
    ];
    const bgTokens = [
      ['--bg','Background'],
      ['--bg-contrast','Background-contrast'],
      ['--bg-blue','Blue background']
    ];

    function swatchHtml(name, label){
      const val = cssVar(name);
      return `
        <div class="swatch" role="button" tabindex="0" aria-label="Copy ${name}" data-token="${name}">
          <div class="tone" style="background:${val}"></div>
          <div class="meta">
            <div><strong>${label}</strong></div>
            <div class="code">${name} → ${val}</div>
          </div>
        </div>`;
    }
    function bindSwatch(el){
      el.addEventListener('click', () => copy(cssVar(el.dataset.token)));
      el.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); copy(cssVar(el.dataset.token)); }
      });
    }
    function buildSwatches(){
      const sys = document.getElementById('swatches-system');
      const bg  = document.getElementById('swatches-bg');
      if(sys){
        sys.innerHTML = sysTokens.map(([t,l]) => swatchHtml(t,l)).join('');
        sys.querySelectorAll('.swatch').forEach(bindSwatch);
      }
      if(bg){
        bg.innerHTML = bgTokens.map(([t,l]) => swatchHtml(t,l)).join('');
        bg.querySelectorAll('.swatch').forEach(bindSwatch);
      }
    }

    // --- Contrast table ---
    const pairs = [
      ['Text on Background', '--text', '--bg'],
      ['Text on Contrast BG', '--text', '--bg-contrast'],
      ['Text on Blue BG', '--text', '--bg-blue'],
      ['Link on Background', '--link', '--bg'],
      ['On-Primary on Primary', '--on-primary', '--sys-primary'],
      ['On-Secondary on Secondary', '--on-secondary', '--sys-secondary'],
      ['On-Success on Success', '--on-success', '--success'],
      ['On-Danger on Danger', '--on-danger', '--danger'],
      ['Warning Text on Warning', '--on-warning', '--warning']
    ];

    function buildContrastTable(){
      const tbody = document.querySelector('#contrast-table tbody');
      if(!tbody) return;
      const rows = pairs.map(([label, fgTok, bgTok]) => {
        const fg = cssVar(fgTok), bg = cssVar(bgTok);
        const ratio = contrastRatio(fg, bg);
        const passAA = ratio >= 4.5 ? 'AA' : 'Fail';
        const large = ratio >= 7 ? 'AAA' : (ratio >= 3 ? 'AA Large' : 'Fail');
        const aaClass = passAA === 'AA' ? 'pass' : 'fail';
        const lgClass = (ratio >= 3) ? 'pass' : 'fail';
        return `
          <tr>
            <td>${label}</td>
            <td>
              <div class="swatch" style="max-width: 100px; margin-bottom: 4px;" role="button" tabindex="0" aria-label="Copy foreground color">
                <div class="tone" style="background:${fg}"></div>
                <div class="meta">
                  <div class="code">${fgTok}<br/>${fg}</div>
                </div>
              </div>
            </td>
            <td>
              <div class="swatch" style="max-width: 100px;" role="button" tabindex="0" aria-label="Copy background color">
                <div class="tone" style="background:${bg}"></div>
                <div class="meta">
                  <div class="code">${bgTok}<br/>${bg}</div>
                </div>
              </div>
            </td>
            <td>${fmtRatio(ratio)}</td>
            <td><span class="tag ${aaClass}">${passAA}</span></td>
            <td><span class="tag ${lgClass}">${large}</span></td>
          </tr>`;
      }).join('');
      tbody.innerHTML = rows;

      // Re-bind swatch listeners for the newly added swatches in the table
      document.querySelectorAll('#contrast-table .swatch').forEach(bindSwatch);
    }

    // --- Init ---
    document.addEventListener('DOMContentLoaded', () => { buildSwatches(); buildContrastTable(); });
  </script>
</body>
</html>